# 1 - Node, NPM, Yarn, and package.json

In this section we will set up Node, NPM, Yarn, a basic `package.json` file, and try a package.

## Installing Node and NPM

First, we need to install Node, which is not only used for back-end JavaScript, but all the tools we need to build a modern Front-End stack.

Head to the [download page](https://nodejs.org/en/download/current/) for macOS or Windows binaries, or the [package manager installations page](https://nodejs.org/en/download/package-manager/) for Linux distributions.

For instance, on **Ubuntu / Debian**, you would run the following commands to install Node:

```bash
curl -sL https://deb.nodesource.com/setup_6.x | sudo -E bash -
sudo apt-get install -y nodejs
```

You want any version of Node > 6.5.0.

`npm`, the default package manager for Node, comes automatically with Node, so you don't have to install it yourself.

**Note**: If Node is already installed, or if you want more flexibility, install `nvm` ([Node Version Manager](https://github.com/creationix/nvm)), make `nvm` install and use the latest version of Node for you.

## Yarn

[Yarn](https://yarnpkg.com/) is another package manager which is much faster than NPM, has offline support, and fetches dependencies [more predictably](https://yarnpkg.com/en/docs/yarn-lock). Since it [came out](https://code.facebook.com/posts/1840075619545360) in October 2016, it received a very quick adoption and is becoming the new package manager of choice of the JavaScript community. We are going to use Yarn in this tutorial. If you want to stick to NPM you can simply replace all `yarn add` and `yarn add --dev` commands of this tutorial by `npm install --save` and `npm install --dev`.

- Install Yarn by following the [instructions](https://yarnpkg.com/en/docs/install). You can likely install it with `npm install -g yarn` or `sudo npm install -g yarn` (yeah, we're using NPM to install Yarn, much like you would use Internet Explorer or Safari to install Chrome!).

## package.json, Hello World, start script

- Create a new folder to work in, and `cd` in it.
- Run `yarn init` and answer the questions (`yarn init -y` to skip all questions), to generate a `package.json` file automatically.
- Create an `index.js` file containing `console.log('Hello world')`.
- Run `node .` in this folder (`index.js` is the default file Node looks for in the current folder). It should print "Hello world".

Running `node .` to execute our program is a bit too low-level. We are going to use an NPM/Yarn script to trigger the execution of that code instead. That will give us a nice abstraction to be able to always use `yarn start`, even when our program gets more complicated.

- In `package.json`, add a `scripts` object to the root object like so:

```json
"scripts": {
  "start": "node ."
}
```

`start` is the name we give to the *task* that will run our program. We are going to create a lot of different tasks in this `scripts` object throughout this tutorial. `start`, `stop`, `test`, are examples of standard names that you can run directly with `yarn start`, `yarn stop`, or `yarn test`. If you use non-standard task names, like `makecoffee`, you need to add `run` to the command like so: `yarn run makecoffee`.

`package.json` must be a valid JSON file, which means that you cannot have trailing commas. So be careful when editing manually your `package.json` file.

- Run `yarn start`. It should print `Hello world`.

- Create a `.gitignore` file and add the following to it:

```gitignore
npm-debug.log
yarn-error.log
```

**Note**: If you take a look at the `package.json` files I provide, you will see a `tutorial-test` script in every chapter. Those scripts let me test that the chapter works fine when running `yarn && yarn start`. You can delete them in your own projects.

## Installing and using a package

In this section we will install and use a package. A "package" is simply a piece of code that someone else wrote, and that you can use in your own code. It can be anything. Here, we're going to try a package that helps you manipulate colors for instance.

- Install the community-made package called `color` by running `yarn add color`.

Open `package.json` to see how Yarn automatically added `color` in  `dependencies`.

A `node_modules` folder has been created to store the package.

- Add `node_modules/` to your `.gitignore` file (and `git init` a new repo if you haven't done that yet).

You will also notice that a `yarn.lock` file got generated by Yarn. You should commit this file to your repository, as it will ensure that everyone in your team uses the same version of your packages. If you're sticking to NPM instead of Yarn, the equivalent of this file is the *shrinkwrap*.

Write the following to your `index.js` file:

```javascript
const Color = require('color');

const redHexa = Color({r: 255, g: 0, b: 0}).hexString();
console.log(redHexa);
```

- Run `yarn start`. It should print `#FF0000`.

Congratulations, you installed and used a package!

`color` is just used in this section to teach you how to use a simple package. We won't need it anymore, so you can uninstall it:

- Run `yarn remove color`

**Note**: There are 2 kinds of package dependencies, `"dependencies"` and `"devDependencies"`. `"dependencies"` is more general than `"devDependencies"`, which are packages that you only need during development, not production (typically, build-related packages, linters, tests, etc). For `"devDependencies"`, we will use `yarn add --dev [package]` to install packages.

Next section: [2 - Setting up ES6 with Babel and Gulp](/tutorial/2-gulp-babel-es6-class-import)

Back to the [table of contents](https://github.com/verekia/js-stack-from-scratch).
